!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.Polygon=e(require("react")):n.Polygon=e(n.react)}(window,function(__WEBPACK_EXTERNAL_MODULE__3__){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=4)}([function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n//# sourceURL=webpack://Polygon/./node_modules/prop-types/lib/ReactPropTypesSecret.js?")},function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(0);\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n//# sourceURL=webpack://Polygon/./node_modules/prop-types/factoryWithThrowingShims.js?")},function(module,exports,__webpack_require__){eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, isValidElement, REACT_ELEMENT_TYPE; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(1)();\n}\n\n\n//# sourceURL=webpack://Polygon/./node_modules/prop-types/index.js?")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__3__;\n\n//# sourceURL=webpack://Polygon/external_%22react%22?")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(3);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MATH_SQUARE_ROOT_OF_2 = Math.sqrt(2);\nvar MATH_FLOATING_POINT_PRECISION = 14;\n\nvar Polygon = function (_Component) {\n  _inherits(Polygon, _Component);\n\n  function Polygon(props) {\n    _classCallCheck(this, Polygon);\n\n    var _this = _possibleConstructorReturn(this, (Polygon.__proto__ || Object.getPrototypeOf(Polygon)).call(this, props));\n\n    _this.componentWillReceiveProps = function (nextProps) {\n      var newPoints = _this.caluatePoints(nextProps.n || _this.props.n, nextProps.size || _this.props.size, nextProps.ratios || _this.props.ratios);\n\n      var isChanged = false;\n      for (var i = 0; i < newPoints.length; i++) {\n        if (_this.state.oldPoints[i][0] !== newPoints[i][0] || _this.state.oldPoints[i][1] !== newPoints[i][1]) {\n          isChanged = true;\n          break;\n        }\n      }\n\n      if (isChanged) {\n        // init animation\n        var steps = _this.state.currentPoints.map(function (point, i) {\n          return point.map(function (value, j) {\n            return (newPoints[i][j] - value) / _this.props.duration;\n          });\n        });\n\n        if (_this.props.isAnimating) {\n          _this.setState({\n            currentTicks: 0,\n            preTimestamp: -1,\n            newPoints: newPoints,\n            oldPoints: _this.state.currentPoints,\n            steps: steps\n          }, function (_) {\n            requestAnimationFrame(_this.animatePolygon);\n          });\n        } else {\n          _this.setState({\n            oldPoints: newPoints,\n            currentPoints: newPoints\n          });\n        }\n      }\n    };\n\n    _this.animatePolygon = function (timestamp) {\n      if (_this.state.currentTicks < _this.props.duration) {\n        var nextTicks = _this.state.preTimestamp === -1 ? 0 : _this.state.currentTicks - _this.state.preTimestamp + timestamp;\n        var r = Math.min(1, nextTicks / _this.props.duration);\n        var currentPoints = _this.state.newPoints.map(function (point, i) {\n          return point.map(function (value, j) {\n            return r * value + (1 - r) * _this.state.oldPoints[i][j];\n          });\n        });\n\n        _this.setState({\n          preTimestamp: timestamp,\n          currentTicks: nextTicks,\n          currentPoints: currentPoints\n        }, function (_) {\n          requestAnimationFrame(_this.animatePolygon);\n        });\n      } else {\n        _this.setState({\n          oldPoints: _this.state.newPoints,\n          currentPoints: _this.state.newPoints\n        });\n      }\n    };\n\n    var points = _this.caluatePoints(_this.props.n, _this.props.size, _this.props.ratios);\n\n    _this.state = {\n      newPoints: points,\n      oldPoints: points,\n      currentPoints: points,\n      steps: [],\n      currentTicks: 0,\n      preTimestamp: -1\n    };\n    return _this;\n  }\n\n  _createClass(Polygon, [{\n    key: 'toRadian',\n    value: function toRadian(deg) {\n      return deg / 180 * Math.PI;\n    }\n  }, {\n    key: 'caluatePoints',\n    value: function caluatePoints(n, size, ratios) {\n      Array.apply(null, Array(Math.max(n - ratios.length, 0))).forEach(function (_) {\n        ratios.push(1);\n      });\n\n      var x = size / 2;\n      var y = 0;\n\n      var r = size / 2;\n      var centerAngle = 360 / n;\n      var points = [];\n      for (var i = 0; i < n; i++) {\n        var innerAngle = centerAngle * i;\n        var innerAngleRad = this.toRadian(innerAngle);\n        var cosInnerAngleRad = Math.cos(innerAngleRad);\n\n        var tangentAngleRad = innerAngleRad / 2;\n        var sinTangentAngleRad = Math.sin(tangentAngleRad);\n        var cosTangentAngleRad = Math.cos(tangentAngleRad);\n\n        var contourSegment = MATH_SQUARE_ROOT_OF_2 * r * Math.sqrt(1 - cosInnerAngleRad);\n        points.push([(x + contourSegment * cosTangentAngleRad) * ratios[i] + r * (1 - ratios[i]), (y + contourSegment * sinTangentAngleRad) * ratios[i] + r * (1 - ratios[i])]);\n      }\n\n      return points.map(function (point) {\n        return point.map(function (v) {\n          return Number(v.toPrecision(MATH_FLOATING_POINT_PRECISION));\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        'svg',\n        { width: this.props.size, height: this.props.size, className: this.props.className },\n        _react2.default.createElement('polygon', {\n          className: this.props.classPrefix + 'polygon' || this.props.classPrefix + 'svg',\n          points: this.state.currentPoints,\n          fill: this.props.fill }),\n        this.props.renderPoint ? this.state.currentPoints.map(function (_, i) {\n          return _react2.default.createElement(\n            'g',\n            { className: _this2.props.classPrefix + 'point', key: i },\n            _this2.props.renderPoint(_, i)\n          );\n        }) : ''\n      );\n    }\n  }]);\n\n  return Polygon;\n}(_react.Component);\n\nexports.default = Polygon;\n\n\nPolygon.defaultProps = {\n  n: 3,\n  size: 50,\n  fill: '#ad893e',\n  ratios: [1, 1, 1],\n  isAnimating: true,\n  duration: 1000,\n  classPrefix: 'r--poly-',\n  renderPoint: null\n};\n\nPolygon.propTypes = {\n  n: _propTypes2.default.number,\n  size: _propTypes2.default.number,\n  fill: _propTypes2.default.string,\n  ratios: _propTypes2.default.arrayOf(_propTypes2.default.number),\n  isAnimating: _propTypes2.default.bool,\n  duration: _propTypes2.default.number,\n  renderPoint: _propTypes2.default.func\n};\n\n//# sourceURL=webpack://Polygon/./src/components/Polygon.js?")}])});